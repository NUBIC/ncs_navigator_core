%div{ :id => "activity_#{activity.activity_id}", :class => "activity_link" }
  - if activity.child_consent?
    = render "parental_permission_for_child_participation", :event => @event, :contact_link => @contact_link
    = render "activity_psc_action", :activity => activity
  - elsif instrument_exists_for_survey?(contact_link, survey)
    = render "previous_activity", :activity => activity, :survey => survey, :contact_link => contact_link
  - elsif @saq_activities.try(:include?, activity)
    = render "saq_activity", :activity => activity, :survey => survey, :event => @event
  - elsif @current_activity == activity
    = render "current_activity", :activity => activity, :survey => survey, :contact_link => contact_link, :person => person
  - elsif activity.consent_activity? && !survey.nil?
    = render "consent_activity", :activity => activity, :survey => survey, :contact_link => contact_link
  - else
    = render "future_activity", :activity => activity, :survey => survey