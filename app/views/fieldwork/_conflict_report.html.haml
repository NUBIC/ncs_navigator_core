%table.conflict_report.records
  %caption
    Conflict report
  %tr
    %th
      Entity
    %th
      Attribute
    %th
      Original
    %th
      Current
    %th
      Proposed
  - ordered_conflict_report(report).each do |entity_type, entities|
    - entities.each do |public_id, attributes|
      - row_class = cycle('even_record', 'odd_record')
      %tr{:class => "#{row_class} conflict"}
        %td.entity{:rowspan => attributes.length + 1}
          = "#{entity_type} #{public_id}"

      - attributes.each do |attribute, state|
        %tr{%s(data-entity-type) => entity_type, %s(data-public-id) => public_id, :class => "#{row_class} conflict"}
          - name = attribute.humanize
          %td.attribute
            = name
          %td.current{%s(data-name) => name}
            = state['current']
          %td.original{%s(data-name) => name}
            = state['original']
          %td.proposed{%s(data-name) => name}
            = state['proposed']
