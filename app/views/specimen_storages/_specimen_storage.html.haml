- if defined?(@specimen_storage.errors) && @specimen_storage.errors.any?
  %div{ :id => "errorExplanation", :class => "errorExplanation"}
    %h2
      = pluralize(@specimen_storage.errors.count, "error")
      prohibited this specimen from being stored
    %ul
      - @specimen_storage.errors.full_messages.each do |msg|
        %li
          = msg

= form_for @specimen_storage do |f|
  = f.label :storage_container_id, "Storage Container Id:"
  = @specimen_storage.storage_container_id
  = "contains the following:"
  - SpecimenReceipt.where(:storage_container_id => @specimen_storage.storage_container_id).each do |val|
    = val.specimen_id
  = f.hidden_field :storage_container_id
  %br
  
  = f.label "Staff:"
  = display_staff_info
  %br
  
  = f.label :placed_in_storage_datetime, "Placed in Storage Date and Time:"
  = f.text_field :placed_in_storage_datetime, :class => "datetime"
  %br
  
  = render "shared/ncs_code_select", { :f => f, :code => :master_storage_unit_code, :label_text => "Master Storage Unit" }
  %br
  
  = f.label :master_storage_unit_id, "Master Storage Unit Id:"
  = f.text_field :master_storage_unit_id
  %br
    
  = f.label :storage_comment, "Storage Comment:"
  = f.text_field :storage_comment
  %br

  = f.label :storage_comment_other, "Storage Comment Other:"
  = f.text_field :storage_comment_other
  %br
  
  = f.label :temp_event_starttime, "Temperature event Start Time:"
  = f.text_field :temp_event_starttime, :class => "time"
  %br

  = f.label :temp_event_endtime, "Temperature event End Time:"
  = f.text_field :temp_event_endtime, :class => "time"
  %br
  
  
  = f.label :temp_event_low_temp, "Temperature event - Low Temperature:"
  = f.text_field :temp_event_low_temp
  %br

  = f.label :temp_event_high_temp, "Temperature event - High Temperature:"
  = f.text_field :temp_event_high_temp
  %br
  
  = f.submit "Store", :disable_with => 'Submitting...', :class => 'spec_stored'

-#
  = "OLD CODE"
  = form_tag specimen_storage, :class => "specimen_storage_form", :id => specimen_storage.storage_container_id do
    = label_tag "specimen_storage[placed_in_storage_datetime]", "Placed in Storage Date and Time:"
    = text_field_tag "specimen_storage[placed_in_storage_datetime]"+"["+specimen_storage.storage_container_id+"]", specimen_storage.placed_in_storage_datetime, :class => "datetime"
    %br

    = label_tag "Master Storage Unit:"
    - opts = [["-- Select Master Storage Unit --", ""]] + NcsCode.ncs_code_lookup(:master_storage_unit_code)
    = select_tag("specimen_storage[master_storage_unit_code]", options_for_select(opts))
    %br  

    = label_tag "Storage Comment:"
    = text_field_tag "specimen_storage[storage_comment]", specimen_storage.storage_comment
    %br

    = label_tag "Storage Comment Other:"
    = text_field_tag "specimen_storage[storage_comment_other]", specimen_storage.storage_comment_other
    %br

    = label_tag "Temperature event Start Time:"
    = text_field_tag "specimen_storage[temp_event_starttime]"+"["+specimen_storage.storage_container_id+"]", specimen_storage.temp_event_starttime, :class => "time"
    %br

    = label_tag "Temperature event End Time:"
    = text_field_tag "specimen_storage[temp_event_endtime]"+"["+specimen_storage.storage_container_id+"]", specimen_storage.temp_event_endtime, :class => "time"
    %br

    = label_tag "Temperature event - Low Temperature:"
    = text_field_tag "specimen_storage[temp_event_low_temp]", specimen_storage.temp_event_low_temp
    %br  

    = label_tag "Temperature event - High Temperature:"
    = text_field_tag "specimen_storage[temp_event_high_temp]", specimen_storage.temp_event_high_temp
    %br

    = hidden_field_tag "specimen_storage[storage_container_id]", specimen_storage.storage_container_id
    = submit_tag "Submit", :disable_with => 'Submitting...', :id => specimen_storage.storage_container_id
